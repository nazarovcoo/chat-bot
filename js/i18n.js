/**
 * i18n - Интернационализация (RU/EN)
 */
(function (global) {
  var translations = {
    ru: {
      // Common
      ok: 'ОК',
      cancel: 'Отмена',
      save: 'Сохранить',
      delete: 'Удалить',
      edit: 'Редактировать',
      add: 'Добавить',
      close: 'Закрыть',
      loading: 'Загрузка...',
      saving: 'Сохраняю...',
      saved: 'Сохранено',
      error: 'Ошибка',
      success: 'Успешно',
      yes: 'Да',
      no: 'Нет',
      wait: 'Подождите...',
      done: 'Готово',
      active: 'Активен',
      inactive: 'Неактивен',
      
      // Auth
      yourName: 'Ваше имя',
      login: 'Войти',
      logout: 'Выйти',
      unauthorized: 'Сначала авторизуйтесь',
      
      // Projects
      newProject: 'Новый проект',
      createProject: 'Создать проект',
      creatingProject: 'Создаю...',
      projectName: 'Название проекта',
      projectNamePlaceholder: 'Например: CreateBot AI',
      botDomain: 'IP / Домен бота',
      botDomainPlaceholder: 'Например: bot.example.com',
      selectProject: 'Выберите проект',
      renameProject: 'Переименовать проект',
      projectCreated: 'Проект создан',
      projectSettings: 'Настройки проекта',
      
      // Telegram
      connectTelegram: 'Подключить Telegram',
      connecting: 'Подключаю...',
      telegramToken: 'Telegram Bot API токен',
      telegramTokenPlaceholder: 'Введите токен',
      telegramConnected: 'подключён',
      telegramNotConnected: 'Не подключён',
      paste: 'Вставить',
      invalidToken: 'Невалидный Telegram токен',
      
      // Sources / Knowledge Base
      sources: 'Источники',
      addSource: 'Добавить источник',
      searchSources: 'Поиск по источникам...',
      addManually: 'Вручную',
      addByUrl: 'По ссылке',
      uploadFile: 'Загрузить файл',
      sourceTitle: 'Название',
      sourceTitlePlaceholder: 'Например: Частые вопросы',
      sourceText: 'Текст',
      sourceTextPlaceholder: 'Вставьте текст базы знаний...',
      sourceUrl: 'URL',
      sourceUrlPlaceholder: 'https://example.com',
      deleteSource: 'Удалить источник?',
      deleteSourceConfirm: 'Источник будет удалён из базы знаний.',
      fileNotSupported: 'Файл не поддерживается',
      fileTooLarge: 'Файл слишком большой',
      
      // Chats
      chats: 'Чаты',
      noChats: 'Нет чатов',
      newMessage: 'Напишите сообщение...',
      messagePlaceholder: 'Введите сообщение',
      send: 'Отправить',
      operator: 'Оператор',
      customer: 'Пользователь',
      noMessages: 'Нет сообщений',
      typing: 'Печатает...',
      
      // Settings
      settings: 'Настройки',
      instructions: 'Инструкции для бота',
      instructionsPlaceholder: 'Ты — вежливый ассистент компании...',
      botName: 'Имя бота',
      botNamePlaceholder: 'Например: Мой магазин бот',
      
      // Plans
      starter: 'Starter',
      pro: 'Pro',
      business: 'Business',
      selectPlan: 'Выбрать',
      paymentSoon: 'Оплата скоро будет доступна',
      
      // Analytics
      analytics: 'Аналитика',
      noData: 'Нет данных для экспорта',
      export: 'Экспорт',
      date: 'Дата',
      channel: 'Канал',
      provider: 'Провайдер',
      model: 'Модель',
      inputTokens: 'Input токены',
      outputTokens: 'Output токены',
      totalTokens: 'Всего токенов',
      cost: 'Стоимость',
      latency: 'Латентность (ms)',
      status: 'Статус',
      
      // KB Processing
      processingFile: 'Читаю файл...',
      chunkingFile: 'Разбиваю на части...',
      generatingQA: 'Генерирую вопросы и ответы...',
      checkingDuplicates: 'Проверяю дубликаты...',
      savingData: 'Сохраняю...',
      unknownError: 'Неизвестная ошибка',
      
      // Errors
      errorSending: 'Ошибка отправки',
      errorLoading: 'Ошибка загрузки',
      errorSaving: 'Ошибка сохранения',
      errorDeleting: 'Ошибка удаления',
      networkError: 'Ошибка сети',
      tryAgain: 'Попробуйте ещё раз',
      fillAllFields: 'Заполните все поля',
      fillFields: 'Заполните поля',
      
      // Empty states
      noProjects: 'Нет проектов',
      createFirstProject: 'Создайте первый проект',
      noSources: 'Нет источников',
      addFirstSource: 'Добавьте первый источник знаний',
      dataAfterChats: 'данные появятся после диалогов',
      
      // Tooltips
      refresh: 'Обновить',
      clearChat: 'Очистить чат',
      theme: 'Сменить тему',
      menu: 'Меню',
      search: 'Поиск',
      scrollDown: 'Прокрутить вниз',
      howItWorks: 'Как это работает?',
      knowledgeBase: 'База знаний',
      newDesign: 'Новый дизайн',
      language: 'Язык',
      
      // Auto-replies
      autoReplies: 'Автоответы',
      keyword: 'Ключевое слово',
      keywordPlaceholder: 'Например: цена, прайс, стоимость',
      answer: 'Ответ',
      answerPlaceholder: 'Текст ответа, который получит пользователь...',
      enable: 'Вкл',
      disable: 'Выкл',
      exactMatch: 'точное',
      containsMatch: 'содержит',
      
      // Referral
      referral: 'Партнёрская программа',
      refLink: 'Реферальная ссылка',
      refConditions: 'Условия партнёрской программы',
      copied: 'Скопировано: ',
      
      // Confirmations
      confirmDelete: 'Удалить бота?',
      confirmAction: 'Подтвердить действие',
      areYouSure: 'Вы уверены?',
      
      // Chat
      notes: 'Заметки оператора',
      notesPlaceholder: 'Заметки оператора (сохраняются автоматически)...',
      replyToCustomer: 'Ответить клиенту напрямую',
      
      // Misc
      uploadFileHint: 'Выберите или перетащите файл (.txt, .md, .csv, .pdf, .docx, .pptx)',
      addAnswer: 'Добавить ответ',
      editAnswer: 'Редактирование ответа',
      replaceAnswer: 'Новые данные для ответа на вопрос',
      howToReplace: 'Замена ответа позволяет изменить информацию, которую ИИ-агент использует отвечая на вопрос',
      additionalInstructions: 'Дайте особые указания по поведению, условиям и стилю ответа на вопрос',
      howToAdd: 'Как дополнить существующие данные для ответа?',
      broadcast: 'Рассылка',
      broadcastText: 'Введите текст рассылки...',
      tgStatus: 'TG',
      user: 'Пользователь',
      companyName: 'Название компании',
      companyNamePlaceholder: 'Например: MyShop',
      expiryDate: 'Срок действия',
      promoCode: 'Промокод',
      promoCodePlaceholder: 'Введите промокод...',
      ownerId: 'ID владельца',
      ownerIdPlaceholder: 'Например: 123456789',
      oldPassword: 'Старый пароль',
      newPassword: 'Новый пароль',
      passwordLength: 'Пароль должен быть не менее 6 символов',
      wrongPassword: 'Неверный старый пароль',
      cardSaved: 'Карта сохранена',
      cardDeleted: 'Карта удалена',
      templateApplied: 'Шаблон применён',
      trigger: 'Триггер',
      addButton: 'Добавьте кнопку',
      networkError: 'Сетевая ошибка',
      botNotFound: 'Не найден бот для этого чата',
      agentInactive: 'Агент неактивен',
      turnOnAgent: 'Включите агента в боковом меню',
      dialogCleared: 'Диалог очищен',
      agentRestarted: 'Агент перезапущен',
      questionRejected: 'Вопрос отклонён',
      csvExported: 'CSV экспортирован',
      itemNotFound: 'Элемент не найден',
      updated: 'Обновлено',
      aiResumed: 'ИИ возобновил общение',
      rulesSaved: 'Правила сохранены',
      addKbFirst: 'Сначала добавьте информацию в базу знаний',
      promptGenerated: 'Системный промпт сгенерирован!',
      transcriptionStarted: 'Обработка транскрипции запущена!',
      transcriptionReady: 'Транскрипция готова!',
      transcriptionProcessing: 'Обработка запущена!',
      transcriptionError: 'Ошибка запуска обработки',
      maxFiles: 'Максимум 3 файла за раз',
      uploadCancelled: 'Загрузка отменена',
      waitForResponse: 'Дождитесь ответа',
      fileTooBig: 'Файл слишком большой. Максимум 20MB.',
      unsupportedFormat: 'Неподдерживаемый формат. PDF, DOCX, TXT, CSV, JPG, PNG.',
      testInProgress: 'Тест в процессе. Загрузите файл после завершения теста.',
      settingsSaved: 'Настройки сохранены',
      uidCopied: 'UID скопирован',
      commandCopied: 'Команда скопирована',
      copiedToClipboard: 'Скопировано',
      pasted: 'Вставлено',
      numberConfirmed: 'Номер подтверждён',
      numberError: 'Ошибка сохранения номера',
      gotoTelegram: 'Переходим в Telegram',
      scenarioSaved: 'Сценарий сохранён',
      scenarioDeleted: 'Сценарий удалён',
      notificationsSaved: 'Настройки уведомлений сохранены',
      currentPlan: 'Это ваш текущий план',
      textAdded: 'Текст добавлен в базу знаний',
      answerAdded: 'Ответ добавлен в базу знаний',
      answerUpdated: 'Ответ обновлён',
      enterAnswerText: 'Введите текст ответа',
      qaGenerating: 'Текст принят — генерирую Q&A…',
      generate: 'сгенерировать',
      
      // Placeholders
      messagePlaceholder: 'Напишите сообщение...',
      notesPlaceholder: 'Заметки оператора (сохраняются автоматически)...',
      replyPlaceholder: 'Ответить клиенту напрямую (Enter — отправить)...',
      instructionsPlaceholder: 'Например: Ты — вежливый ассистент компании...',
      keywordPlaceholder: 'Например: цена, прайс, стоимость',
      answerPlaceholder: 'Текст ответа, который получит пользователь...',
      flowTriggerPlaceholder: 'Например: цена, прайс, тариф',
      flowTextPlaceholder: 'Выберите интересующий вариант:',
      companyNamePlaceholder: 'Например: MyShop',
      expiryPlaceholder: 'ММ/ГГ',
      promoPlaceholder: 'Введите промокод...',
      ownerIdPlaceholder: 'Например: 123456789',
      authNamePlaceholder: 'Ваше имя',
      botNamePlaceholder: 'Например: Мой магазин бот',
      broadcastPlaceholder: 'Введите текст рассылки...',
      kbTitlePlaceholder: 'Например: О компании',
      kbContentPlaceholder: 'Введите текст...',
      newAnswerPlaceholder: 'Новые данные для ответа на вопрос',
      searchPlaceholder: 'Поиск по названию',
      refLinkLoading: 'Загрузка...',
      accountTitle: 'Аккаунт',
      botsTitle: 'Боты',
      newDesignV3: 'Новый дизайн (v3)',
      kb: 'База знаний',
      deleteBot: 'Удалить бота?',
      delete: 'Удалить',
      connecting: 'Подключаю...',
      connect: 'Подключить',
      uploadFileTitle: 'Загрузить файл',
      addTextTitle: 'Добавить текст',
      emptyBot: 'Бот',
      tgConnected: 'подключён',
      noTitle: 'Без названия',
      edit: 'Редактировать',
      open: 'Открыть',
      deleteSourceTitle: 'Удалить источник?',
      deleteSourceText: 'Источник будет удалён из базы знаний.',
      titleLabel: 'Заголовок',
      textLabel: 'Текст',
      saving: 'Сохраняю…',
      confirmAction: 'Подтвердить действие',
      areYouSure: 'Вы уверены?',
      userName: 'Пользователь',
      error: 'Ошибка',
      networkErrorRetry: 'Сетевая ошибка. Попробуйте ещё раз.',
      startProcessing: 'Запускаю обработка...',
      toggleOn: 'Вкл',
      toggleOff: 'Выкл',
      loading: 'Загрузка...',
      trialEnded: 'Пробный период завершён',
      planActive: 'Активен',
      planExpired: 'Истёк',
      confirmButton: 'Подтвердить',
      login: 'Войти',
      createAccount: 'Создать аккаунт',
      accountConnected: 'Подключаем аккаунт...',
      menu: 'Меню',
      scrollDown: 'Прокрутить вниз',
      emptyAnswer: 'Пустой ответ от AI.',
      emptyBotAnswer: 'Пустой ответ. Попробуйте позже.',
      dataAfterChats: 'данные появятся после диалогов',
      deleteSourceTitle: 'Удалить источник?',
      deleteSourceText: 'Источник будет удалён из базы знаний.',
      createAccount: 'Создать аккаунт',
      fillEmailPassword: 'Заполните email и пароль',
      userNotFound: 'Пользователь не найден',
      wrongPassword: 'Неверный пароль',
      weakPassword: 'Пароль слишком короткий (минимум 6 символов)',
      invalidEmail: 'Неверный формат email',
      invalidCredential: 'Неверный email или пароль',
      popupBlocked: 'Браузер заблокировал окно входа. Разрешите всплывающие окна для этого сайта и попробуйте снова.',
      googleAuthError: 'Ошибка входа через Google',
      logout: 'Выйти',
      logoutConfirm: 'Выйти из аккаунта?',
      logoutDesc: 'Вы будете перенаправлены на страницу входа.',
      uploadFileTitle: 'Загрузить файл',
      addTextTitle: 'Добавить текст',
      newAnswer: 'Добавить ответ',
      editAnswer: 'Редактирование ответа',
      replaceAnswer: 'Замена ответа позволяет изменить информацию, которую ИИ-агент использует отвечая на вопрос',
      additionalInfo: 'Дайте особые указания по поведению, условиям и стилю ответа на вопрос',
      howToAdd: 'Как дополнить существующие данные для ответа?',
      areYouSure: 'Вы уверены?',
      ok: 'ОК',
      cancel: 'Отмена',
      send: 'Отправить',
      paste: 'Вставить',
      loadingDots: 'Загрузка...',
      uploadCancelled: 'Загрузка отменена',
      interfaceError: 'Ошибка интерфейса',
      reloadPage: 'Обновить страницу',
      processingError: 'Ошибка обработки',
      aiError: 'Ошибка AI. Проверьте настройки провайдера.',
      loadError: 'Ошибка загрузки',
      networkError: 'Ошибка сети',
      retry: 'попробуйте ещё раз',
    },
    en: {
      ok: 'OK',
      cancel: 'Cancel',
      save: 'Save',
      delete: 'Delete',
      edit: 'Edit',
      add: 'Add',
      close: 'Close',
      loading: 'Loading...',
      saving: 'Saving...',
      saved: 'Saved',
      error: 'Error',
      success: 'Success',
      yes: 'Yes',
      no: 'No',
      wait: 'Wait...',
      done: 'Done',
      active: 'Active',
      inactive: 'Inactive',
      
      yourName: 'Your name',
      login: 'Login',
      logout: 'Logout',
      unauthorized: 'Please login first',
      
      newProject: 'New project',
      createProject: 'Create project',
      creatingProject: 'Creating...',
      projectName: 'Project name',
      projectNamePlaceholder: 'e.g., CreateBot AI',
      botDomain: 'Bot IP / Domain',
      botDomainPlaceholder: 'e.g., bot.example.com',
      selectProject: 'Select project',
      renameProject: 'Rename project',
      projectCreated: 'Project created',
      projectSettings: 'Project settings',
      
      connectTelegram: 'Connect Telegram',
      connecting: 'Connecting...',
      telegramToken: 'Telegram Bot API token',
      telegramTokenPlaceholder: 'Enter token',
      telegramConnected: 'connected',
      telegramNotConnected: 'Not connected',
      paste: 'Paste',
      invalidToken: 'Invalid Telegram token',
      
      sources: 'Sources',
      addSource: 'Add source',
      searchSources: 'Search sources...',
      addManually: 'Manual',
      addByUrl: 'By URL',
      uploadFile: 'Upload file',
      sourceTitle: 'Title',
      sourceTitlePlaceholder: 'e.g., FAQ',
      sourceText: 'Text',
      sourceTextPlaceholder: 'Paste knowledge base text...',
      sourceUrl: 'URL',
      sourceUrlPlaceholder: 'https://example.com',
      deleteSource: 'Delete source?',
      deleteSourceConfirm: 'Source will be removed from knowledge base.',
      fileNotSupported: 'File not supported',
      fileTooLarge: 'File too large',
      
      chats: 'Chats',
      noChats: 'No chats',
      newMessage: 'Write a message...',
      messagePlaceholder: 'Enter message',
      send: 'Send',
      operator: 'Operator',
      customer: 'User',
      noMessages: 'No messages',
      typing: 'Typing...',
      
      settings: 'Settings',
      instructions: 'Bot instructions',
      instructionsPlaceholder: 'You are a friendly assistant...',
      botName: 'Bot name',
      botNamePlaceholder: 'e.g., My Shop Bot',
      
      starter: 'Starter',
      pro: 'Pro',
      business: 'Business',
      selectPlan: 'Select',
      paymentSoon: 'Payment coming soon',
      
      analytics: 'Analytics',
      noData: 'No data to export',
      export: 'Export',
      date: 'Date',
      channel: 'Channel',
      provider: 'Provider',
      model: 'Model',
      inputTokens: 'Input tokens',
      outputTokens: 'Output tokens',
      totalTokens: 'Total tokens',
      cost: 'Cost',
      latency: 'Latency (ms)',
      status: 'Status',
      
      processingFile: 'Reading file...',
      chunkingFile: 'Splitting into chunks...',
      generatingQA: 'Generating Q&A...',
      checkingDuplicates: 'Checking duplicates...',
      savingData: 'Saving...',
      unknownError: 'Unknown error',
      
      errorSending: 'Send error',
      errorLoading: 'Load error',
      errorSaving: 'Save error',
      errorDeleting: 'Delete error',
      networkError: 'Network error',
      tryAgain: 'Try again',
      fillAllFields: 'Fill all fields',
      fillFields: 'Fill fields',
      
      noProjects: 'No projects',
      createFirstProject: 'Create your first project',
      noSources: 'No sources',
      addFirstSource: 'Add your first knowledge source',
      dataAfterChats: 'data will appear after conversations',
      
      refresh: 'Refresh',
      clearChat: 'Clear chat',
      theme: 'Change theme',
      menu: 'Menu',
      search: 'Search',
      scrollDown: 'Scroll down',
      howItWorks: 'How it works?',
      knowledgeBase: 'Knowledge base',
      newDesign: 'New design',
      language: 'Language',
      
      autoReplies: 'Auto-replies',
      keyword: 'Keyword',
      keywordPlaceholder: 'e.g., price, cost',
      answer: 'Answer',
      answerPlaceholder: 'Answer text user will receive...',
      enable: 'On',
      disable: 'Off',
      exactMatch: 'exact',
      containsMatch: 'contains',
      
      referral: 'Referral program',
      refLink: 'Referral link',
      refConditions: 'Referral program conditions',
      copied: 'Copied: ',
      
      confirmDelete: 'Delete bot?',
      confirmAction: 'Confirm action',
      areYouSure: 'Are you sure?',
      
      notes: 'Operator notes',
      notesPlaceholder: 'Operator notes (auto-saved)...',
      replyToCustomer: 'Reply to customer directly',
      
      uploadFileHint: 'Select or drag file (.txt, .md, .csv, .pdf, .docx, .pptx)',
      addAnswer: 'Add answer',
      editAnswer: 'Edit answer',
      replaceAnswer: 'New answer data',
      howToReplace: 'Answer replacement changes info that AI agent uses',
      additionalInstructions: 'Give special instructions for behavior and style',
      howToAdd: 'How to add to existing data?',
      broadcast: 'Broadcast',
      broadcastText: 'Enter broadcast text...',
      tgStatus: 'TG',
      user: 'User',
      companyName: 'Company name',
      companyNamePlaceholder: 'e.g., MyShop',
      expiryDate: 'Expiry date',
      promoCode: 'Promo code',
      promoCodePlaceholder: 'Enter promo code...',
      ownerId: 'Owner ID',
      ownerIdPlaceholder: 'e.g., 123456789',
      oldPassword: 'Old password',
      newPassword: 'New password',
      passwordLength: 'Password must be at least 6 characters',
      wrongPassword: 'Wrong old password',
      cardSaved: 'Card saved',
      cardDeleted: 'Card deleted',
      templateApplied: 'Template applied',
      trigger: 'Trigger',
      addButton: 'Add a button',
      networkError: 'Network error',
      botNotFound: 'Bot not found for this chat',
      agentInactive: 'Agent inactive',
      turnOnAgent: 'Turn on agent in sidebar',
      dialogCleared: 'Dialog cleared',
      agentRestarted: 'Agent restarted',
      questionRejected: 'Question rejected',
      csvExported: 'CSV exported',
      itemNotFound: 'Item not found',
      updated: 'Updated',
      aiResumed: 'AI resumed conversation',
      rulesSaved: 'Rules saved',
      addKbFirst: 'Add knowledge base info first',
      promptGenerated: 'System prompt generated!',
      transcriptionStarted: 'Transcription processing started!',
      transcriptionReady: 'Transcription ready!',
      transcriptionProcessing: 'Processing started!',
      transcriptionError: 'Processing start error',
      maxFiles: 'Max 3 files at a time',
      uploadCancelled: 'Upload cancelled',
      waitForResponse: 'Wait for response',
      fileTooBig: 'File too big. Max 20MB.',
      unsupportedFormat: 'Unsupported format. PDF, DOCX, TXT, CSV, JPG, PNG.',
      testInProgress: 'Test in progress. Upload file after test completes.',
      settingsSaved: 'Settings saved',
      uidCopied: 'UID copied',
      commandCopied: 'Command copied',
      copiedToClipboard: 'Copied',
      pasted: 'Pasted',
      numberConfirmed: 'Number confirmed',
      numberError: 'Number save error',
      gotoTelegram: 'Going to Telegram',
      scenarioSaved: 'Scenario saved',
      scenarioDeleted: 'Scenario deleted',
      notificationsSaved: 'Notification settings saved',
      currentPlan: 'This is your current plan',
      textAdded: 'Text added to knowledge base',
      answerAdded: 'Answer added to knowledge base',
      answerUpdated: 'Answer updated',
      enterAnswerText: 'Enter answer text',
      qaGenerating: 'Text received — generating Q&A...',
      generate: 'generate',
      
      // Placeholders
      messagePlaceholder: 'Write a message...',
      notesPlaceholder: 'Operator notes (auto-saved)...',
      replyPlaceholder: 'Reply to customer directly (Enter to send)...',
      instructionsPlaceholder: 'You are a friendly assistant company...',
      keywordPlaceholder: 'e.g., price, cost',
      answerPlaceholder: 'Answer text user will receive...',
      flowTriggerPlaceholder: 'e.g., price, cost, tariff',
      flowTextPlaceholder: 'Choose an option:',
      companyNamePlaceholder: 'e.g., MyShop',
      expiryPlaceholder: 'MM/YY',
      promoPlaceholder: 'Enter promo code...',
      ownerIdPlaceholder: 'e.g., 123456789',
      authNamePlaceholder: 'Your name',
      botNamePlaceholder: 'e.g., My Shop Bot',
      broadcastPlaceholder: 'Enter broadcast text...',
      kbTitlePlaceholder: 'e.g., About company',
      kbContentPlaceholder: 'Enter text...',
      newAnswerPlaceholder: 'New answer data',
      searchPlaceholder: 'Search by name',
      refLinkLoading: 'Loading...',
      accountTitle: 'Account',
      botsTitle: 'Bots',
      newDesignV3: 'New design (v3)',
      kb: 'Knowledge base',
      deleteBot: 'Delete bot?',
      delete: 'Delete',
      connecting: 'Connecting...',
      connect: 'Connect',
      uploadFileTitle: 'Upload file',
      addTextTitle: 'Add text',
      emptyBot: 'Bot',
      tgConnected: 'connected',
      noTitle: 'No title',
      edit: 'Edit',
      open: 'Open',
      deleteSourceTitle: 'Delete source?',
      deleteSourceText: 'Source will be removed from knowledge base.',
      titleLabel: 'Title',
      textLabel: 'Text',
      saving: 'Saving...',
      confirmAction: 'Confirm action',
      areYouSure: 'Are you sure?',
      userName: 'User',
      error: 'Error',
      networkErrorRetry: 'Network error. Try again.',
      startProcessing: 'Starting processing...',
      toggleOn: 'On',
      toggleOff: 'Off',
      loading: 'Loading...',
      trialEnded: 'Trial ended',
      planActive: 'Active',
      planExpired: 'Expired',
      confirmButton: 'Confirm',
      login: 'Login',
      createAccount: 'Create account',
      accountConnected: 'Connecting account...',
      menu: 'Menu',
      scrollDown: 'Scroll down',
      emptyAnswer: 'Empty AI answer.',
      emptyBotAnswer: 'Empty answer. Try later.',
      dataAfterChats: 'data will appear after conversations',
      deleteSourceTitle: 'Delete source?',
      deleteSourceText: 'Source will be removed from knowledge base.',
      createAccount: 'Create account',
      fillEmailPassword: 'Fill email and password',
      userNotFound: 'User not found',
      wrongPassword: 'Wrong password',
      weakPassword: 'Password too short (min 6 characters)',
      invalidEmail: 'Invalid email format',
      invalidCredential: 'Invalid email or password',
      popupBlocked: 'Browser blocked login popup. Allow popups for this site and try again.',
      googleAuthError: 'Google login error',
      logout: 'Logout',
      logoutConfirm: 'Logout of account?',
      logoutDesc: 'You will be redirected to login page.',
      uploadFileTitle: 'Upload file',
      addTextTitle: 'Add text',
      newAnswer: 'Add answer',
      editAnswer: 'Edit answer',
      replaceAnswer: 'Answer replacement changes info that AI agent uses',
      additionalInfo: 'Give special instructions for behavior and style',
      howToAdd: 'How to add to existing data?',
      areYouSure: 'Are you sure?',
      ok: 'OK',
      cancel: 'Cancel',
      send: 'Send',
      paste: 'Paste',
      loadingDots: 'Loading...',
      uploadCancelled: 'Upload cancelled',
      interfaceError: 'Interface error',
      reloadPage: 'Reload page',
      processingError: 'Processing error',
      aiError: 'AI error. Check provider settings.',
      loadError: 'Load error',
      networkError: 'Network error',
      retry: 'try again',
    }
  };

  var currentLang = 'ru';

  function setLang(lang) {
    if (translations[lang]) {
      currentLang = lang;
      try {
        localStorage.setItem('lang', lang);
      } catch (e) {}
    }
  }

  function getLang() {
    return currentLang;
  }

  function t(key, params) {
    var dict = translations[currentLang] || translations.ru;
    var text = dict[key] || translations.ru[key] || key;
    
    if (params) {
      Object.keys(params).forEach(function (k) {
        text = text.replace('{' + k + '}', params[k]);
      });
    }
    
    return text;
  }

  function init() {
    try {
      var saved = localStorage.getItem('lang');
      if (saved && translations[saved]) {
        currentLang = saved;
      }
    } catch (e) {}
  }

  init();

  function initPlaceholders() {
    var map = {
      'global-search': 'searchPlaceholder',
      'chat-input': 'messagePlaceholder',
      'ov-chat-input': 'messagePlaceholder',
      'chat-ob-input': 'accountConnected',
      'ar-keyword': 'keywordPlaceholder',
      'ar-response': 'answerPlaceholder',
      'flow-trigger': 'flowTriggerPlaceholder',
      'flow-text': 'flowTextPlaceholder',
      's-company-name': 'companyNamePlaceholder',
      'card-expiry-input': 'expiryPlaceholder',
      's-promo-input': 'promoPlaceholder',
      'notif-owner-id': 'ownerIdPlaceholder',
      'auth-name': 'authNamePlaceholder',
      'bot-name': 'botNamePlaceholder',
      'bc-text': 'broadcastPlaceholder',
      'kb-title': 'kbTitlePlaceholder',
      'kb-content': 'kbContentPlaceholder',
      'ea-textarea': 'newAnswerPlaceholder',
      'sp-ref-link': 'refLinkLoading',
    };
    
    Object.keys(map).forEach(function(id) {
      var el = document.getElementById(id);
      if (el) el.placeholder = t(map[id]);
    });
    
    var titleMap = {
      'btn-open-kb': 'kb',
      'theme-icon': 'theme',
      'refresh-chat-btn': 'refresh',
      'clear-chat-btn': 'clearChat',
      'kb-close': 'close',
      'cos-scroll-btn': 'scrollDown',
      'mob-menu-btn': 'menu',
    };
    
    Object.keys(titleMap).forEach(function(id) {
      var el = document.getElementById(id);
      if (el) el.title = t(titleMap[id]);
    });
  }

  var I18n = {
    t: t,
    setLang: setLang,
    getLang: getLang,
    lang: currentLang,
    initPlaceholders: initPlaceholders
  };

  if (typeof module !== 'undefined' && module.exports) {
    module.exports = I18n;
  } else {
    global.I18n = I18n;
  }

})(typeof window !== 'undefined' ? window : global);
